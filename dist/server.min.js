var express=require("express"),app=express(),morgan=require("morgan"),request=require("request"),config=require("./config"),bodyParser=require("body-parser");app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.set("view engine","ejs"),app.use(morgan("dev")),app.get("/",function(s,e){e.render("pages/index")}),app.get("/berwick",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=berwick%2C+pa&sort=&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.get("/bloomsburg",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=bloomsburg%2C+pa&sort=&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.get("/danville",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=danville%2C+pa&sort=&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.get("/test/:city/:state",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l="+s.params.city+"%2C+"+s.params.state+"&sort=&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchTotalResults:i.totalResults,searchLocation:i.location,searchResults:i.results})}})}),app.post("/search",function(s,e){var t=s.body.jobQuery;request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q="+t+"&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,r,i){if(!s&&200==r.statusCode){var a=JSON.parse(i);0===a.totalResults?e.render("pages/no-results",{noResultsJobQuery:t}):e.render("pages/results",{searchTotalResults:a.totalResults,searchLocation:a.location,searchResults:a.results})}})}),app.get("/geisinger",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=geisinger&l=bloomsburg%2C+pa&sort=&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.get("/bloomsburg-university",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=bloomsburg%20university&l=bloomsburg%2C+pa&sort=&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.get("/berwick-hospital-center",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=berwick%20hospital&l=berwick%2C+pa&sort=&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.get("/wise-foods",function(s,e){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=wise%20foods&l=berwick%2C+pa&sort=&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(s,t,r){if(!s&&200==t.statusCode){var i=JSON.parse(r);e.render("pages/results",{searchLocation:i.location,searchResults:i.results})}})}),app.listen(config.port),console.log("App started! Look at port "+config.port);