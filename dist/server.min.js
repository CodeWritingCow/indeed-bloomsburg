var express=require("express"),app=express(),morgan=require("morgan"),request=require("request"),config=require("./config"),bodyParser=require("body-parser");app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.set("view engine","ejs"),app.use(morgan("dev")),app.get("/",function(e,s){s.render("pages/index")}),app.get("/towns",function(e,s){s.render("pages/towns")}),app.get("/employers",function(e,s){s.render("pages/employers")}),app.get("/towns/berwick",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=berwick%2C+pa&sort=&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/towns/bloomsburg",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=bloomsburg%2C+pa&sort=&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/towns/danville",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=danville%2C+pa&sort=&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/towns/lewisburg",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=lewisburg%2C+pa&sort=date&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/towns/milton",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=milton%2C+pa&sort=date&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/towns/sunbury",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l=sunbury%2C+pa&sort=date&radius="+config.results_radius+"&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/test/:city/:state",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&l="+e.params.city+"%2C+"+e.params.state+"&sort=&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchTotalResults:a.totalResults,searchLocation:a.location,searchResults:a.results})}})}),app.post("/search",function(e,s){var t=e.body.jobQuery;request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q="+t+"&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,r,a){if(!e&&200==r.statusCode){var i=JSON.parse(a);0===i.totalResults?s.render("pages/no-results",{noResultsJobQuery:t}):s.render("pages/results",{searchTotalResults:i.totalResults,searchLocation:i.location,searchResults:i.results})}})}),app.get("/employers/alcoa",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=alcoa&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/geisinger",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=geisinger&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/bloomsburg-university",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=bloomsburg%20university&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/bucknell-university",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=bucknell%20university&l=lewisburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/berwick-hospital-center",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=berwick%20hospital&l=berwick%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/evangelical-community-hospital",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=evangelical%20community%20hospital&l=lewisburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/bayada",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=bayada&l=berwick%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/dollar-general",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=dollar%20general&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/maria-joseph-manor",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=maria%20joseph%20manor&l=danville%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/sheetz",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=sheetz&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/victorias-secret",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=victoria&rsquo;%20secret&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/wal-mart",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=walmart&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/weis-markets",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=weis%20markets&l=bloomsburg%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.get("/employers/wise-foods",function(e,s){request("http://api.indeed.com/ads/apisearch?publisher="+config.publisher_id+"&format=json&q=wise%20foods&l=berwick%2C+pa&sort=date&radius=&st=&jt=&start=&limit="+config.results_limit+"&fromage=&filter=&latlong=1&co=us&chnl=&userip=1.2.3.4&useragent=Mozilla/%2F4.0%28Firefox%29&v=2",function(e,t,r){if(!e&&200==t.statusCode){var a=JSON.parse(r);s.render("pages/results",{searchLocation:a.location,searchResults:a.results})}})}),app.listen(config.port),console.log("App started! Look at port "+config.port);